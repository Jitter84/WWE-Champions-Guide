!function(e){function t(i){if(a[i])return a[i].exports;var r=a[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var a={};t.m=e,t.c=a,t.i=function(e){return e},t.d=function(e,a,i){t.o(e,a)||Object.defineProperty(e,a,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var a=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(a,"a",a),a},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=1973)}({1973:function(e,t,a){e.exports=a(8)},8:function(e,t){function a(e){switch(e){case"Move_Generate_Abs":return"Generate";case"Move_Bleed_Perc":return"MoveBleedImprove";case"Move_Destroy_Abs":return"GemDestroy";case"Move_Steal_Perc":return"MoveStealImprove";case"Move_Submission_Dmg_Perc":return"MoveSubmissionDamage";case"Move_Dmg_Perc":case"Move_StartCharge_Abs":return"MoveEffectImprove";case"ModGem_Effect_Strike_Perc":case"ModGem_Effect_Heal_Perc":return"GemEffectImprove";default:return"None"}}$(document).ready(function(){function e(e){$(".btn-equip-ability").each(function(t){-1!==e.indexOf(t)&&$(this).trigger("click")})}function t(e){for(var t in C){var a=C[t];if(a.ID==e)return a}return!1}function i(e,a){var i=t(e);if(i)for(var r in i.levels){var n=i.levels[r];if(n.level==a)return n}return!1}function r(){var e=[];for(var t in C){var a=C[t];e.push(a.Name+' "'+a.NickName+'"');var i=c(a);$(".add-trainers-list").append(i)}}function n(e){var a=t(e);if(a){var i=p(a);return $(".added-trainers").append(i),!0}return!1}function s(){M=I[k][w]}function l(e){$("#wrestlerLevelUI").text(M.LevelCap+"/"+M.LevelCap),$("#wrestlerMaxLevel").val(M.LevelCap),$("#wrestlerLevelInput").prop("min",1),$("#wrestlerLevelInput").prop("max",M.LevelCap),$("#wrestlerLevelInput").val(M.LevelCap),o(M.Abilities),d(M.LevelCap)}function d(e){var t=$("#wrestlerLevelInput").val()||1;e&&(t=e);var a=u(t);$(".gem-stat").removeClass("trainer-buff-modification"),$("#statsTalentScore").val(a.TalentScore),$("#stat-hp").text(a.HP),$("#stat-red").text(a.Red).attr("data-variable-value",a.Red),$("#stat-black").text(a.Black).attr("data-variable-value",a.Black),$("#stat-yellow").text(a.Yellow).attr("data-variable-value",a.Yellow),$("#stat-blue").text(a.Blue).attr("data-variable-value",a.Blue),$("#stat-green").text(a.Green).attr("data-variable-value",a.Green),$("#stat-purple").text(a.Purple).attr("data-variable-value",a.Purple),f()}function f(){var e=parseInt($("#statsTalentScore").val()),t=0;$(".row.ability.equipped").each(function(e){var a=$(this).find('input[name="talent-score"]').first().val();t+=parseInt(a)});var a=parseInt((e+t+414)/2.2);$("#stat-talent").text(a)}function c(e){return $("<a/>",{class:"list-group-item add-trainer",href:"#","data-trainer-id":e.ID}).on("click",function(e){e.preventDefault(),$("#addTrainerModal").modal("hide"),n($(this).attr("data-trainer-id"))}).append($("<div/>",{class:"row"}).append($("<div/>",{class:"col-xs-3"}).append($("<div/>",{class:"added-trainer-thumbnail",style:'background-image:url("/img/Portraits/'+e.Portrait+'")'}))).append($("<div/>",{class:"col-xs-9"}).append($("<h4/>",{style:"margin-top:0;",class:"wrestler-name",text:e.Name+' "'+e.NickName+'"'})).append($("<p/>",{text:e.levels[0].text}))))}function p(e){return $("<div/>",{style:"margin-bottom:15px;",class:"row trainer","data-trainer-id":e.ID,"data-activated":"false","data-buff-gem-type":e.buffGemType,"data-buff-move-type":e.buffMoveType,"data-buff-value":e.levels[0].buffValue}).append($("<div/>",{class:"col-xs-12"}).append($("<h4/>",{text:e.Name+' "'+e.NickName+'"'})).append($("<div/>",{class:"row"}).append($("<div/>",{class:"col-xs-3"}).append($("<div/>",{class:"added-trainer-thumbnail",style:'background-image:url("/img/Portraits/'+e.Portrait+'")'}))).append($("<div/>",{class:"col-xs-9"}).append($("<div/>",{class:"row"}).append($("<div/>",{class:"col-xs-3 text-left"}).append($("<button/>",{class:"btn btn-danger",html:'<i class="fa fa-trash-o"></i>'}).on("click",function(){$(this).closest(".trainer").first().find("button.deactivate-trainer-effect").first().trigger("click"),$(this).closest(".trainer").first().remove()}))).append($("<div/>",{class:"col-xs-6 text-center"}).append($("<span/>",{class:"trainer-talent-score",text:e.levels[0].talentScore+"/"+e.maxTalentScore}))).append($("<div/>",{class:"col-xs-3 text-right"}).append($("<button/>",{class:"btn btn-success activate-trainer-effect",html:'<i class="fa fa-check"></i>'}).on("click",function(){$(this).addClass("hidden"),$(this).closest(".trainer").first().find(".deactivate-trainer-effect").removeClass("hidden"),$(this).closest(".trainer").first().attr("data-activated","true"),o(M.Abilities,!0),d(),_()})).append($("<button/>",{class:"btn btn-primary deactivate-trainer-effect hidden",html:'<i class="fa fa-ban"></i>'}).on("click",function(){$(this).addClass("hidden"),$(this).closest(".trainer").first().find(".activate-trainer-effect").removeClass("hidden"),$(this).closest(".trainer").first().attr("data-activated","false"),o(M.Abilities,!0),d(),_()})))).append($("<div/>",{class:"row",style:"margin-top:8px;"}).append($("<div/>",{class:"col-xs-12"}).append($("<p/>",{class:"trainer-buff-text",text:e.levels[0].text})))).append($("<div/>",{class:"row",style:"margin-top:0px;"}).append($("<div/>",{class:"col-xs-11"}).append($("<input/>",{class:"trainer-level",type:"range",name:"trainer-level",min:"1",max:e.levels.length,value:"1"}).on("input",function(){var t=parseInt($(this).val()),a=($(this).attr("max"),$($(this).closest(".trainer").first())),r=a.attr("data-activated"),n=a.find(".trainer-buff-text").first(),s=a.find(".trainer-talent-score").first(),l=a.attr("data-trainer-id"),f=i(l,t);parseInt(a.attr("data-buff-value")),f.buffValue;a.attr("data-buff-value",f.buffValue),s.empty(),s.text(f.talentScore+"/"+e.maxTalentScore),n.empty(),n.text(f.text),"true"===r&&(o(M.Abilities,!0),d(),_())})))))))}function v(e,t){return t=t||e.levelCap,$("<div/>",{class:"row ability",sylte:"margin-bottom:10px;","data-buffed-id":e.move.AffectedValueID,"data-gem-type":e.gemType,"data-effects":JSON.stringify(e.move.Effects)}).append($("<input/>",{type:"hidden",value:e.levels[t-1].talentScore,name:"talent-score"})).append($("<div/>",{class:"col-xs-3"}).append($("<img/>",{src:"/img/Gems/"+e.gemType+".png",width:45,height:45,alt:e.gemType+" Gem",class:"center-block"})).append($("<p/>",{html:'<span class="ability-mp">0</span> / <span class="ability-cost">'+e.cost+"</span>",class:"text-center"})).append($("<p/>",{class:"text-center"}).append($("<button/>",{class:"btn btn-xs btn-primary btn-equip-ability",html:"Equip"}).on("click",function(){var e=$($(this).closest(".ability").first());$(this).hasClass("btn-primary")?($(this).removeClass("btn-primary"),$(this).addClass("btn-success"),e.addClass("equipped"),$(this).text("Equipped")):($(this).removeClass("btn-success"),$(this).addClass("btn-primary"),e.removeClass("equipped"),$(this).text("Equip")),f()})))).append($("<div/>",{class:"col-xs-9"}).append($("<div/>",{class:"row"}).append($("<div/>",{class:"col-xs-12"}).append($("<p/>").append($("<strong/>",{text:e.name})))).append($("<div/>",{class:"col-xs-12"}).append($("<p/>",{html:e.levels[t-1].html,class:"ability-text"}))).append($("<div/>",{class:"col-xs-11"}).append($("<div/>",{class:"level-selector"}).append($("<p/>").append($("<span/>",{text:t,class:"abilitySelectedLevel"})).append("/").append($("<span/>",{text:e.levelCap,class:"abilityMaxLevel"}))).append($("<input/>",{type:"range",name:"ability-level",min:1,max:e.levelCap,value:t}).on("input",function(){var e=$(this).val(),t=$(this).parent().find(".abilitySelectedLevel").first(),a=$($(this).closest(".ability").first()),i=a.find(".ability-text").first(),r=a.find('input[name="talent-score"]').first(),n=$(this).next().val(),s=b(n,e);t.text(e),i.html(s.html),r.val(s.talentScore),a.find(".ability-mp").first().text(0),d(),_(a)})).append($("<input/>",{class:"ability-id",name:"ability-id",type:"hidden",value:e.ID}))))))}function o(t,a){var i=[],r=[0,1,2];a&&(r=[],$('input[name="ability-level"]').each(function(){i.push(parseInt($(this).val()))}),$(".row.ability").each(function(e){$(this).hasClass("equipped")&&r.push(e)})),$("#abilities").empty(),t.forEach(function(e,t,r){if(a&&i&&i.length>0){var n=i[t];$("#abilities").append(v(e,n))}else $("#abilities").append(v(e))}),e(r)}function u(e){for(var t in M.Stats){var a=M.Stats[t];if(a.level==e)return a.stats}}function m(e){var t=M.Abilities;for(var a in t)if(t[a].ID==e)return t[a];return!1}function b(e,t){var a=m(e),i=a.levels;for(var r in i)if(i[r].level==t)return i[r];return!1}function h(e,t,a,i,r,n,s){if(-1!==$.inArray(e,t)){if("Generate"==e||"GemDestroy"==e){var l=a.find("span[data-variable-name='"+i+"']");if(l&&l.length){var d=l.first().attr("data-variable-value");if(r==d)return!0}}else if("MoveEffectImprove"==e){if(r==n)return!0}else if("GemEffectImprove"==e){var l=a.find("span[data-variable-name='"+i+"']");if(l&&l.length){var d=l.first().attr("data-variable-value");if("ModGem_Effect_Strike_Perc"==s&&"Strike"==d)return!0;if("ModGem_Effect_Heal_Perc"==s&&"Heal"==d)return!0}}else if("MoveSubmissionDamage"==e||"MoveStealImprove"==e||"MoveBleedImprove"==e)return!0;return!1}return!1}function x(e,t,a,i){if("Move_Bleed_Perc"==i){var r=e.find("span[data-variable-name='val2']").first();r.addClass("trainer-buff-modification");var n=r.attr("data-variable-value"),s=r.text(),l=parseInt(n)*t,d=parseInt(s)+l;r.text(d)}if("Move_Destroy_Abs"==i){var f=e.find("span[data-variable-name='val1']").first();f.addClass("trainer-buff-modification");var d=parseInt(f.text())+t;f.text(d)}if("Move_Generate_Abs"==i){var f=e.find("span[data-variable-name='val1']").first();f.addClass("trainer-buff-modification");var d=parseInt(f.text())+t;f.text(d)}if("Move_Dmg_Perc"==i){var r=e.find("span[data-variable-name='damage']").first();r.addClass("trainer-buff-modification");var n=r.attr("data-variable-value"),s=r.text(),l=parseInt(n)*t,d=parseInt(s)+l;r.text(d)}if("Move_StartCharge_Abs"==i){var f=e.closest(".ability").first().find(".ability-mp").first();f.addClass("trainer-buff-modification");var d=parseInt(f.text())+t;f.text(d)}if("ModGem_Effect_Heal_Perc"==i){var r=e.find("span[data-variable-name='val3']").first();r.addClass("trainer-buff-modification");var n=r.attr("data-variable-value"),s=r.text(),l=parseInt(n)*t,d=parseInt(s)+l;r.text(d)}if("ModGem_Effect_Strike_Perc"==i){var r=e.find("span[data-variable-name='val3']").first();r.addClass("trainer-buff-modification");var n=r.attr("data-variable-value"),s=r.text(),l=parseInt(n)*t,d=parseInt(s)+l;r.text(d)}if("Move_Submission_Dmg_Perc"==i||"Move_Steal_Perc"==i){var r=e.find("span[data-variable-name='val1']").first();r.addClass("trainer-buff-modification");var n=r.attr("data-variable-value"),s=r.text(),l=parseInt(n)*t,d=parseInt(s)+l;r.text(d)}}function y(e,t,a){if("Gem_Dmg_Perc"==a){var i=$($(".gem-stats").first().find('[data-gem-type="'+e+'"]').first());i.addClass("trainer-buff-modification");var r=i.attr("data-variable-value"),n=i.text(),s=parseInt(r)*t,l=parseInt(n)+s;i.text(l)}if("Gem_Dmg_Abs"==a){var i=$($(".gem-stats").first().find('[data-gem-type="'+e+'"]').first());i.addClass("trainer-buff-modification");var r=i.attr("data-variable-value"),n=i.text(),l=parseInt(n)+t;i.text(l)}$(".gem-stat").each(function(e,t){var a=$(this).text();a=Math.round(a),$(this).text(a)})}function g(e,t,a,i,r){if(r){var n=r.data("effects"),s=r.data("buffed-id"),l=r.data("gem-type"),d=r.find(".ability-text").first();h(t,n,d,s,e,l,i)&&x(d,a,t,i)}else $(".ability").each(function(r,n){var s=$(this).data("effects"),l=$(this).data("buffed-id"),d=$(this).data("gem-type"),f=$(this).find(".ability-text").first();h(t,s,f,l,e,d,i)&&x(f,a,t,i)});$('span[data-variable-name="damage"], span[data-variable-name="val1"], span[data-variable-name="val2"], span[data-variable-name="val3"]').each(function(e,t){var a=$(this).text();a=Math.round(a),$(this).text(a)})}function _(e){$(".added-trainers").find('.trainer[data-activated="true"]').each(function(t,i){var r=$(i),n=1*r.attr("data-buff-value"),s=r.data("buff-gem-type"),l=r.data("buff-move-type");g(s,a(l),n,l,e),y(s,n,l)})}var I={},C={},M={},S=$("#wrestlerSlug").val();if(S){var w="3_3",k="Gold";$.getJSON("/db/wrestler/"+S+".json",function(e){I=e,s(),l(M.LevelCap)}),$.getJSON("/db/misc/trainers.json",function(e){C=e,r()}),$("#search").on("keyup keypress",function(e){if(13===(e.keyCode||e.which))return e.preventDefault(),!1;var t=$(this).val().toUpperCase();$(".add-trainer").each(function(){$(this).find(".wrestler-name").first().text().toUpperCase().indexOf(t)>-1?$(this).removeClass("hidden"):$(this).addClass("hidden")})}),$("#wrestlerLevelInput").on("input",function(){var e=$(this).val(),t=$("#wrestlerMaxLevel").val();$("#wrestlerLevelUI").text(e+"/"+t),o(M.Abilities,!0),d(e),_()}),$('input[name="stars"]').on("change",function(){w=$(this).val(),s(),l(),_()}),$('input[name="tier"]').on("change",function(){k=$(this).val(),s(),l(),_()}),$("input.trainer-level").on("input",function(){var e=parseInt($(this).val()),t=($(this).attr("max"),$($(this).closest(".trainer").first())),a=t.attr("data-activated"),r=t.find(".trainer-buff-text").first(),n=t.find(".trainer-talent-score").first(),s=t.attr("data-trainer-id"),l=i(s,e);parseInt(t.attr("data-buff-value")),l.buffValue;t.attr("data-buff-value",l.buffValue),n.empty(),n.text(l.talentScore+"/"+l.maxTalentScore),r.empty(),r.text(l.text),"true"===a&&(o(M.Abilities,!0),d(),_())})}})}});